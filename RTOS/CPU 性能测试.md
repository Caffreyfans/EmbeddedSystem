# 系统性能测试

最近想要考虑测试系统的性能，主要分为如下三个方面：

- 计算性能
- 内存性能
- IO 性能

如果想要测试性能，就需要测试方法和性能测试程序，今天主要考虑测试系统的计算性能，目前在 RTT 中测试计算性能有两种选择，分别是 `dhrystone` 和`coremark`，通过软件包可以很方便地将相关测试代码加入到系统中。

接下来对手上的 `zynq 7020/7045` 开发板分别进行性能测试结果如下：

| 7020 开发板 666M | 开启 cache | 关闭 cache | 03 优化  | 03 优化连接调试器 |
| ------ | ------ | ------ |------ | ------ |
| `dhrystone` | 510| 24| 1500 | xxx |
| `coremark` | 461| 24| 2571 | 1161|

| 7045 开发板 800M | 开启 cache | 关闭 cache | 03 优化连接调试器 |
| ------ | ------ | ------ | ------ |
| `dhrystone` | 358| 24 | 931 |
| `coremark` | 361| 23 | 1333 |

`dhrystone` 只能对系统的整形运算性能进行测试，而且其结果受到编译器性能很大的影响，有人开玩笑说 `dhrystone` 是测试了编译器的性能。 `coremark` 是更新一些的测试，其测试项也更加丰富，例如整数，浮点，矩阵等等都可以进行测试。

关于编译选项的影响，经过测试在 O3 优化的情况下，对系统的跑分有 3-5 倍的运算速度提升，也就是说影响很大，评估系统运行速度时，注意编译器优化的影响也需要注意。
